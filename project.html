<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Projek</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- HEADER -->
  <header class="bg-white shadow-md">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center bg-white/70 backdrop-blur-sm">
      <div class="flex items-center space-x-3">
        <img src="img/jata.png" alt="Logo" class="h-10 w-10 object-contain">
        <a href="index.html" class="no-underline text-gray-800 hover:text-gray-800">
          <h1 class="text-2xl font-bold text-blue-600">Hub Inovasi</h1>
        </a>
      </div>
      <nav class="space-x-6">
        <a href="#about" class="hover:text-blue-600">Info</a>
        <a href="#arkib" class="hover:text-blue-600">Arkib</a>
      </nav>
    </div>
  </header>

  <main class="flex items-center justify-center p-6 my-0">
      <div class="max-w-6xl w-full bg-white rounded-lg shadow p-6 grid md:grid-cols-2 gap-8" id="details">

      </div>
  </main>

  <script>
    function setMainImage(src) {
      document.getElementById("mainImage").src = src;
    }
    
    const params = new URLSearchParams(window.location.search);
    const projectId = params.get("id");

    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQpim1tLE_YzeFsEAKmi92Irs2_WWAj1A73LlJZZ8S5qac3Rkv7U7ld4xc-0vYvtqTna9TpyIMMZhQF/pub?gid=0&single=true&output=csv";

    fetch(sheetURL)
      .then(res => res.text())
      .then(csv => {
            const results = Papa.parse(csv, { header: true, skipEmptyLines: true });
            const row = results.data.find(r => r.id === projectId);

            if (row) {

              const baseName = row.thumbnail.trim();
              const totalImages = 3;
              let thumbnailsHTML = "";

              for (let i = 1; i <= totalImages; i++) {
                thumbnailsHTML += `
                  <img src="img/${baseName} (${i}).jpg" 
                       class="w-20 h-20 object-cover rounded border cursor-pointer hover:opacity-80"
                       onclick="setMainImage(this.src)">
                  `;
              }
              document.getElementById("details").innerHTML = `
                 <!-- Left: Image Gallery -->
                 <div>
                      <img id="mainImage" src="img/${baseName} (1).jpg" alt="Project Image" 
                           class="w-full h-96 object-cover rounded-lg border">
                      <!-- Thumbnails -->
                      <div class="flex gap-3 mt-4">
                           ${thumbnailsHTML}
                      </div>
                 </div>

                 <!-- Right: Project Info -->
                 <div class="flex flex-col justify-between h-full">
                      <div>
                           <h1 class="text-2xl font-bold text-gray-900 mb-2">${row.nama}</h1>
                           <h2 class="text-lg font-semibold text-gray-800 mb-2">${row.kumpulan}</h2>
                           <div class="flex justify-between text-gray-600 mb-4">
                                <!-- Left: Tahun + Anugerah -->
                                <div class="flex flex-col">
                                      <span>Anugerah Inovasi Jabatan Perkhidmatan Awam</span>
                                      <span>${row.tahun}</span>
                                      
                               </div>

                               <!-- Right: Badge -->
                               <span>
                                    <img src="img/${row.pencapaian}.png" 
                                         alt="Pencapaian" 
                                         class="w-12 h-12 rounded-full object-cover">
                              </span>
                          </div>
                       </div>

                       <div class="flex-grow flex items-center">
                          <div>
                               <button id="likeBtn" class="flex items-center gap-2 text-gray-700 hover:text-green-600">
                                    üëç <span id="likeCount">0</span>
                               </button>

                               <button id="dislikeBtn" class="flex items-center gap-2 text-gray-700 hover:text-red-600">
                                    <!-- Heroicon: outline thumb down -->
                                    <svg xmlns="http://www.w3.org/2000/svg" 
                                        fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                        class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" 
                                         d="M10 15v4a2 2 0 002 2 2 2 0 002-2v-4m2 0H8m8 0V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v10m8 0H8" />
                                    </svg>
                                    <span id="dislikeCount">0</span>
                               </button>
                               <hr class="my-6 border-gray-300">
                               <h3 class="text-gray-600" style="font-weight: bold; margin-bottom: 10px">Penerangan Projek: </h3>
                               <p class="text-gray-600">${row.penerangan}</p>
                          </div>
                       </div>
                       
                       <!-- Back button -->
                       <div class="mt-6">
                            <a href="gallery.html?category=${row.kategori}" 
                               class="inline-block bg-gray-800 text-white px-6 py-2 rounded shadow hover:bg-gray-700">
                               Kembali
                            </a>
                       </div>
                   </div>
                   `;
            } else {
              document.getElementById("details").innerHTML = "<p class='text-red-500'>Item not found.</p>";
            }
        });
  </script>
</body>
</html>
